!function(e){var t=0,s=function(t){return e(t).first().children("."+e.fn.multiSelector.defaults.selectedElementClass)},l={bind:function(l){l=e.extend(e.fn.multiSelector.defaults,l),this.each(function(){var n=this,i="l"+ ++t;e(this).data("ms-id",i),l.disableSelection&&e(this).on("selectstart",function(){return!1}),e(this).on("click",l.selector,function(t){l.onSelectionStart(s(n),n,this,t);var i=e(n).children("."+l.lastElementClass);if(0===i.length&&(i=e(n).children(l.selector)),i.length>0&&t.shiftKey&&!l.disableShift){var a=e(n).children(l.selector),c=a.index(i.first()),r=a.index(this);return e(n).children(".ms-shifted").removeClass("ms-shifted").removeClass("ms-selected"),a.slice(Math.min(c,r),Math.max(c,r)+1).addClass(l.selectedElementClass).addClass("ms-shifted"),void l.onSelectionEnd(s(n),n,this,t)}if(e(n).children(l.selector).removeClass("ms-shifted"),i.removeClass(l.lastElementClass),(!t.ctrlKey&&!t.metaKey||l.disableCtrl)&&e(n).children(l.selector).not(this).removeClass(l.selectedElementClass),e(this).toggleClass(l.selectedElementClass),e(this).toggleClass(l.lastElementClass,e(this).hasClass(l.selectedElementClass)),0===e(n).children("."+l.lastElementClass).length){for(var d=e(this).next();d.length>0;){if(e(d[0]).hasClass(l.selectedElementClass)){!0,e(d[0]).addClass(l.lastElementClass);break}d=e(d[0]).next()}if(0===e(n).children("."+l.lastElementClass).length)for(var o=e(this).prev();o.length>0;){if(e(o[0]).hasClass(l.selectedElementClass)){!0,e(o[0]).addClass(l.lastElementClass);break}o=e(o[0]).next()}}l.onSelectionEnd(e(n).children("."+l.selectedElementClass),n,this,t)})})},get:function(){if(this.length>1){var t={};return this.each(function(){t[e(this).data("ms-id")]=s(this)}),t}return s(this)},select:function(){this.each(function(){e(this).children(e.fn.multiSelector.defaults.selector).addClass(e.fn.multiSelector.defaults.selectedElementClass)})},deselect:function(){this.each(function(){e(this).children(e.fn.multiSelector.defaults.selector).removeClass(e.fn.multiSelector.defaults.selectedElementClass).removeClass(e.fn.multiSelector.defaults.lastElementClass)})},unbind:function(){this.each(function(){e(this).unbind("click selectstart")})}};e.fn.multiSelector=function(t){return l[t]?l[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.multiSelector"):l.bind.apply(this,arguments)},e.fn.multiSelector.defaults={selectedElementClass:"ms-selected",lastElementClass:"ms-last",selector:"*",disableSelection:!0,disableShift:!1,disableCtrl:!1,onSelectionStart:function(){},onSelectionEnd:function(){}}}(jQuery);